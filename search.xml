<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>hadoop、hbase、zk伪集群服务单独启动命令</title>
      <link href="/2020/02/19/hadoop%E3%80%81hbase%E3%80%81zk%E4%BC%AA%E9%9B%86%E7%BE%A4%E6%9C%8D%E5%8A%A1%E5%8D%95%E7%8B%AC%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2020/02/19/hadoop%E3%80%81hbase%E3%80%81zk%E4%BC%AA%E9%9B%86%E7%BE%A4%E6%9C%8D%E5%8A%A1%E5%8D%95%E7%8B%AC%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body><table><thead><tr><th align="center">服务名</th><th>重启命令</th><th>对应服务</th></tr></thead><tbody><tr><td align="center">SecondaryNameNode</td><td>sh /opt/hadoop/sbin/start-dfs.sh</td><td>hadoop</td></tr><tr><td align="center">ResourceManager</td><td>sh /opt/hadoop/sbin/start-yarn.sh</td><td>hadoop</td></tr><tr><td align="center">NameNode</td><td>sh /opt/hadoop/sbin/start-dfs.sh</td><td>hadoop</td></tr><tr><td align="center">HRegionServer</td><td>sh /opt/hbase/bin/hbase-daemon.sh start regionserver</td><td>hbase</td></tr><tr><td align="center">HMaster</td><td>sh /opt/hbase/bin/hbase-daemon.sh start master</td><td>hbase</td></tr><tr><td align="center">QuorumPeerMain</td><td></td><td>zookeeper</td></tr></tbody></table></body></html>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bigdata </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简单实现内网穿透</title>
      <link href="/2019/12/16/%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
      <url>/2019/12/16/%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body><h1 id="本地实现内网穿透"><a href="#本地实现内网穿透" class="headerlink" title="本地实现内网穿透"></a>本地实现内网穿透</h1><blockquote><ul><li>工具：ngrok</li><li>环境：Mac OS 10.15</li><li>其他工具：nginx</li></ul></blockquote><h2 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h2><ol><li>使用homebrew安装nginx</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew install nginx</span></span><br></pre></td></tr></tbody></table></figure></div><blockquote><p>通过homebrew安装的工具，会保存在<code>/usr/local/etc</code>目录下</p></blockquote><ol start="2"><li>启动nginx</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> nginx</span></span><br></pre></td></tr></tbody></table></figure></div><ol start="3"><li>打开浏览器，输入<code>http://localhost:8080</code>,看到以下界面，表示安装成功。</li></ol><p><img alt="nginx" data-src="https://imgkr.cn-bj.ufileos.com/5554a05c-5260-482b-ada1-915972806a2b.png" class="lazyload"></p><ol start="4"><li>修改nginx配置</li></ol><ul><li>进入nginx目录：</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/etc/nginx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vim nginx.conf</span></span><br></pre></td></tr></tbody></table></figure></div><ul><li>修改nginx.conf文件中的下面部分</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">server {</span><br><span class="line">#修改端口号</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        location / {</span><br><span class="line">        #修改根目录</span><br><span class="line">            root   /Users/dizent/Documents/themes/Site/Category/;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        }</span><br><span class="line">        ……</span><br></pre></td></tr></tbody></table></figure></div><blockquote><p>我在<code>Users/dizent/Documents/themes/Site/Category</code>目录下放置了一些静态页面，以便调试。</p></blockquote><p><img alt="image" data-src="https://imgkr.cn-bj.ufileos.com/ef6911e0-1c2b-4778-93e8-8f087226147e.png" class="lazyload"></p><ul><li>保存后重新启动</li></ul><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> nginx -s reload</span></span><br></pre></td></tr></tbody></table></figure></div><ul><li>浏览器打开页面可以看到</li></ul><p><img alt="页面展示" data-src="https://imgkr.cn-bj.ufileos.com/ea7db8ef-5beb-4fa9-b047-d5bdc0aa9016.png" class="lazyload"></p><h2 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h2><blockquote><p>经过上一章的操作，在本地已经可以通过浏览器访问该文件夹下的文件，接下来我们就要操作内网穿透，使用户可以在所有地方都可以访问该网页。</p></blockquote><ol><li>安装ngrok</li></ol><ul><li>进入ngrok官网下载安装包：<a href="https://ngrok.com/download" target="_blank" rel="noopener">https://ngrok.com/download</a></li></ul><p><img alt="下载页面" data-src="https://imgkr.cn-bj.ufileos.com/cfb139f5-6c6b-4bb5-a6bb-9a0c52c48abd.png" class="lazyload"></p><ol start="2"><li>下载之后，打开下载目录，并解压</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> unzip /ngrok.zip</span></span><br></pre></td></tr></tbody></table></figure></div><ol start="3"><li>获取授权</li></ol><ul><li>注册登录ngrok账号</li><li>进入：<a href="https://dashboard.ngrok.com/auth" target="_blank" rel="noopener">https://dashboard.ngrok.com/auth</a></li></ul><p><img alt="复制授权码" data-src="https://imgkr.cn-bj.ufileos.com/5477076e-f0b0-4df9-b3c1-8a72eccc1f26.png" class="lazyload"></p><ul><li>复制授权码，在终端输入命令：<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> [ngrok目录]</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./ngrok authtoken [授权码]</span></span><br></pre></td></tr></tbody></table></figure></div></li></ul><ol start="4"><li>开启内网穿透</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./ngrok http 80</span></span><br><span class="line">ngrok by @inconshreveable                                                                                                                                               (Ctrl+C to quit)</span><br><span class="line"></span><br><span class="line">Session Status                online</span><br><span class="line">Account                       Dizent (Plan: Free)</span><br><span class="line">Version                       2.3.34</span><br><span class="line">Region                        United States (us)</span><br><span class="line">Web Interface                 http://127.0.0.1:4040</span><br><span class="line">Forwarding                    http://13e89141.ngrok.io -> http://localhost:80</span><br><span class="line">Forwarding                    https://13e89141.ngrok.io -> http://localhost:80</span><br><span class="line"></span><br><span class="line">Connections                   ttl     opn     rt1     rt5     p50     p90</span><br><span class="line">                              0       0       0.00    0.00    0.00    0.00</span><br></pre></td></tr></tbody></table></figure></div><blockquote><p>出现以上代码时表明启动成功。</p></blockquote><ol start="5"><li>在任意联网的设备输入上述地址：<a href="http://13e89141.ngrok.io" target="_blank" rel="noopener">http://13e89141.ngrok.io</a></li></ol><p><img alt="电脑展示效果" data-src="https://imgkr.cn-bj.ufileos.com/37fff383-e3c0-4044-83a2-5e0c66d0a433.png" class="lazyload"></p><p><img alt="手机展示效果" data-src="https://imgkr.cn-bj.ufileos.com/24e766f9-e9fc-4da6-b57d-f4d212759b95.png" class="lazyload"></p><ol start="6"><li>使用内网穿透分享文件</li></ol><ul><li>在刚才放置网站的文件夹下，访问任意想分享的文件，例如：</li></ul><p><img alt="文件" data-src="https://imgkr.cn-bj.ufileos.com/f7a6d926-fa69-479e-9705-835f8a9be6c5.png" class="lazyload"></p><ul><li><p>我在根目录下新建了一个<code>/images</code>文件夹，并放置了一张图片，命名为<code>二维码.jpg</code></p></li><li><p>在浏览器输入<code>http://13e89141.ngrok.io/images/二维码.jpg</code></p></li></ul><p><img alt="访问文件" data-src="https://imgkr.cn-bj.ufileos.com/0e27ee10-1ac8-4b28-910b-5f7dab279061.png" class="lazyload"></p><blockquote><p>内网穿透免费版网速较慢，只为可以实现内网资源在外网可以访问，一般只做接口调试使用。<br>如果需要更好的网速体验，请使用公网服务器。或者购买官方的加速服务器。</p></blockquote></body></html>]]></content>
      
      
      <categories>
          
          <category> 技术笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络 </tag>
            
            <tag> ngrok </tag>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>双十二淘宝隐藏活动分享</title>
      <link href="/2019/12/08/%E5%8F%8C%E5%8D%81%E4%BA%8C%E6%B7%98%E5%AE%9D%E9%9A%90%E8%97%8F%E6%B4%BB%E5%8A%A8%E5%88%86%E4%BA%AB/"/>
      <url>/2019/12/08/%E5%8F%8C%E5%8D%81%E4%BA%8C%E6%B7%98%E5%AE%9D%E9%9A%90%E8%97%8F%E6%B4%BB%E5%8A%A8%E5%88%86%E4%BA%AB/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body><h1 id="双十二淘宝隐藏活动分享"><a href="#双十二淘宝隐藏活动分享" class="headerlink" title="双十二淘宝隐藏活动分享"></a>双十二淘宝隐藏活动分享</h1><blockquote><ul><li>距离双十一没多久，双十二马上就要来了，不知道大家双十一有没有买买买上瘾，还是双十二准备再剁手一波呢。</li><li>今天给大家准备了一批双十二隐藏活动链接，大家可以找到自己需要的主题领取优惠券。以备不时之需。</li><li>参与方法：找到自己感兴趣的活动，复制提供的淘口令，打开手机淘宝，点击弹框进入相应活动页面即可。</li></ul></blockquote><h2 id="瓜分亿万红包，最高1212元！人人抽3次。"><a href="#瓜分亿万红包，最高1212元！人人抽3次。" class="headerlink" title="瓜分亿万红包，最高1212元！人人抽3次。"></a>瓜分亿万红包，最高1212元！人人抽3次。</h2><h3 id="活动时间：12-07-12-12"><a href="#活动时间：12-07-12-12" class="headerlink" title="活动时间：12.07-12.12"></a>活动时间：12.07-12.12</h3><ul><li>活动介绍：复制淘口令打开手机淘宝，领取红包，每天三次，最高1212元。</li><li>淘口令 ：<code>复制这条信息，$BWgDYB5Gyjm$，到【手机淘宝】</code></li></ul><h2 id="饿了么福利红包每日领"><a href="#饿了么福利红包每日领" class="headerlink" title="饿了么福利红包每日领"></a>饿了么福利红包每日领</h2><h3 id="活动时间：2019-12-04-2020-03-31"><a href="#活动时间：2019-12-04-2020-03-31" class="headerlink" title="活动时间：2019.12.04-2020.03.31"></a>活动时间：2019.12.04-2020.03.31</h3><ul><li><p>活动介绍：复制口令打开手机淘宝，领取饿了么外卖红包，最高31元。</p></li><li><p>淘口令：<code>复制这条信息，$sa0cYBXTBUw$，到【手机淘宝】</code></p></li></ul><h2 id="双12电影演出视频爆款"><a href="#双12电影演出视频爆款" class="headerlink" title="双12电影演出视频爆款"></a>双12电影演出视频爆款</h2><h3 id="活动时间：2019-12-04-2019-12-12"><a href="#活动时间：2019-12-04-2019-12-12" class="headerlink" title="活动时间：2019.12.04-2019.12.12"></a>活动时间：2019.12.04-2019.12.12</h3><ul><li>活动介绍：复制口令打开手机淘宝，领优惠券（电影票，演唱会，剧目，超值折扣)</li><li>淘口令：<code>复制这条信息，$LbdbYBXh3BT$，到【手机淘宝】</code></li></ul><h2 id="猫超双12主会场，领券满169减20"><a href="#猫超双12主会场，领券满169减20" class="headerlink" title="猫超双12主会场，领券满169减20"></a>猫超双12主会场，领券满169减20</h2><h3 id="活动时间：2019-12-01-2019-12-12"><a href="#活动时间：2019-12-01-2019-12-12" class="headerlink" title="活动时间：2019.12.01-2019.12.12"></a>活动时间：2019.12.01-2019.12.12</h3><ul><li>活动介绍：复制口令打开手机淘宝，领天猫超市169减20优惠券</li><li>淘口令：<code>复制这条信息，$W63nYBX6VXy$，到【手机淘宝】</code></li></ul><h2 id="天猫年终品牌盛典-每满300减30"><a href="#天猫年终品牌盛典-每满300减30" class="headerlink" title="天猫年终品牌盛典-每满300减30"></a>天猫年终品牌盛典-每满300减30</h2><h3 id="活动时间：2019-12-01-2019-12-12-1"><a href="#活动时间：2019-12-01-2019-12-12-1" class="headerlink" title="活动时间：2019.12.01-2019.12.12"></a>活动时间：2019.12.01-2019.12.12</h3><ul><li>活动介绍：复制口令打开手机淘宝，领天猫年终盛典300减30优惠券</li><li>淘口令：<code>复制这条信息，$55dWYBX6mNO$，到【手机淘宝】</code></li></ul><h2 id="2019淘宝双十二"><a href="#2019淘宝双十二" class="headerlink" title="2019淘宝双十二"></a>2019淘宝双十二</h2><h3 id="活动时间：2019-12-01-2019-12-12-2"><a href="#活动时间：2019-12-01-2019-12-12-2" class="headerlink" title="活动时间：2019.12.01-2019.12.12"></a>活动时间：2019.12.01-2019.12.12</h3><ul><li>活动介绍：复制口令打开手机淘宝，抢限时优惠商品。</li><li>下列为各分区入口口令，复制对应类别下的口令，打开手机淘宝即可。</li></ul><h4 id="2019淘宝双12-源头好货"><a href="#2019淘宝双12-源头好货" class="headerlink" title="2019淘宝双12-源头好货"></a>2019淘宝双12-源头好货</h4><ul><li><code>复制这条信息，$4fVfYBXhaQj$，到【手机淘宝】</code></li></ul><h4 id="2019淘宝双12-时髦女装"><a href="#2019淘宝双12-时髦女装" class="headerlink" title="2019淘宝双12-时髦女装"></a>2019淘宝双12-时髦女装</h4><ul><li><code>复制这条信息，$YtK3YBXhldl$，到【手机淘宝】</code></li></ul><h4 id="2019淘宝双12-美妆个护"><a href="#2019淘宝双12-美妆个护" class="headerlink" title="2019淘宝双12-美妆个护"></a>2019淘宝双12-美妆个护</h4><ul><li><code>复制这条信息，$bAayYBXh4FT$，到【手机淘宝】</code></li></ul><h4 id="2019淘宝双12-童装玩具"><a href="#2019淘宝双12-童装玩具" class="headerlink" title="2019淘宝双12-童装玩具"></a>2019淘宝双12-童装玩具</h4><ul><li><code>复制这条信息，$YvX0YBXSePt$，到【手机淘宝】</code></li></ul><h4 id="2019淘宝双12-母婴潮品"><a href="#2019淘宝双12-母婴潮品" class="headerlink" title="2019淘宝双12-母婴潮品"></a>2019淘宝双12-母婴潮品</h4><ul><li><code>复制这条信息，$waQ2YBXSjvi$，到【手机淘宝】</code></li></ul><h4 id="2019淘宝双12-箱包配件"><a href="#2019淘宝双12-箱包配件" class="headerlink" title="2019淘宝双12-箱包配件"></a>2019淘宝双12-箱包配件</h4><ul><li><code>复制这条信息，$SmgfYBXhxqw$，到【手机淘宝】</code></li></ul><h4 id="2019淘宝双12-生活百货"><a href="#2019淘宝双12-生活百货" class="headerlink" title="2019淘宝双12-生活百货"></a>2019淘宝双12-生活百货</h4><ul><li><code>复制这条信息，$RbCdYBXhJAo$，到【手机淘宝】</code></li></ul><h2 id="2019天猫12-12年终品牌盛典"><a href="#2019天猫12-12年终品牌盛典" class="headerlink" title="2019天猫12.12年终品牌盛典"></a>2019天猫12.12年终品牌盛典</h2><h3 id="活动时间：2019-12-01-2019-12-12-3"><a href="#活动时间：2019-12-01-2019-12-12-3" class="headerlink" title="活动时间：2019.12.01-2019.12.12"></a>活动时间：2019.12.01-2019.12.12</h3><ul><li>活动介绍：复制口令打开手机淘宝，领天猫品牌双十二专享优惠券。</li><li>下列为各分区入口口令，复制对应类别下的口令，打开手机淘宝即可。</li></ul><h4 id="2019天猫12-12年终品牌盛典-全球尖货会场"><a href="#2019天猫12-12年终品牌盛典-全球尖货会场" class="headerlink" title="2019天猫12.12年终品牌盛典-全球尖货会场"></a>2019天猫12.12年终品牌盛典-全球尖货会场</h4><ul><li><code>复制这条信息，$qx5XYBX7YXK$，到【手机淘宝】</code></li></ul><h4 id="2019天猫12-12年终品牌盛典-母婴好货会场"><a href="#2019天猫12-12年终品牌盛典-母婴好货会场" class="headerlink" title="2019天猫12.12年终品牌盛典-母婴好货会场"></a>2019天猫12.12年终品牌盛典-母婴好货会场</h4><ul><li><code>复制这条信息，$WjGXYBXSlzb$，到【手机淘宝】</code></li></ul><h4 id="2019天猫12-12年终品牌盛典-女装主会场"><a href="#2019天猫12-12年终品牌盛典-女装主会场" class="headerlink" title="2019天猫12.12年终品牌盛典-女装主会场"></a>2019天猫12.12年终品牌盛典-女装主会场</h4><ul><li><code>复制这条信息，$t8KtYBXSrFY$，到【手机淘宝】</code></li></ul><h4 id="2019天猫12-12-年终品牌盛典-服饰主会场"><a href="#2019天猫12-12-年终品牌盛典-服饰主会场" class="headerlink" title="2019天猫12.12.年终品牌盛典-服饰主会场"></a>2019天猫12.12.年终品牌盛典-服饰主会场</h4><ul><li><code>复制这条信息，$W0cYYBXSH2S$，到【手机淘宝】</code></li></ul><h2 id="其他活动"><a href="#其他活动" class="headerlink" title="其他活动"></a>其他活动</h2><h3 id="吃喝玩乐一站购"><a href="#吃喝玩乐一站购" class="headerlink" title="吃喝玩乐一站购"></a>吃喝玩乐一站购</h3><ul><li>活动介绍：参与活动，9.9元抢水果</li><li>淘口令：<code>复制这条信息，$bBakYBXSK02$，到【手机淘宝】</code></li></ul><h3 id="双12勤鸽到家服务"><a href="#双12勤鸽到家服务" class="headerlink" title="双12勤鸽到家服务"></a>双12勤鸽到家服务</h3><ul><li>活动介绍： 保洁服务，品质到家</li><li>淘口令：<code>复制这条信息，$uR1cYBXhJjl$，到【手机淘宝】</code></li></ul><h3 id="飞猪双12好货商品库"><a href="#飞猪双12好货商品库" class="headerlink" title="飞猪双12好货商品库"></a>飞猪双12好货商品库</h3><ul><li>活动介绍：飞猪过年乐，飞猪好货会场，抢飞猪旅行好货</li><li>淘口令： <code>复制这条信息，$1U4BYBX6jQq$，到【手机淘宝】</code></li></ul></body></html>]]></content>
      
      
      
        <tags>
            
            <tag> 薅羊毛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>京东双十一自动养红包脚本</title>
      <link href="/2019/11/04/%E4%BA%AC%E4%B8%9C%E5%8F%8C%E5%8D%81%E4%B8%80%E8%87%AA%E5%8A%A8%E5%85%BB%E7%BA%A2%E5%8C%85%E8%84%9A%E6%9C%AC/"/>
      <url>/2019/11/04/%E4%BA%AC%E4%B8%9C%E5%8F%8C%E5%8D%81%E4%B8%80%E8%87%AA%E5%8A%A8%E5%85%BB%E7%BA%A2%E5%8C%85%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body><h2 id="京东双十一自动养红包脚本"><a href="#京东双十一自动养红包脚本" class="headerlink" title="京东双十一自动养红包脚本"></a>京东双十一自动养红包脚本</h2><blockquote><p>前置条件，安装Google浏览器（chrome浏览器）</p></blockquote><ol><li>使用chrome浏览器打开网址：<a href="https://m.jd.com" target="_blank" rel="noopener">京东</a>（或直接输入网址：<a href="https://m.jd.com" target="_blank" rel="noopener">https://m.jd.com</a>)</li><li>登陆自己的京东账号</li><li>进入该活动地址：<a href="https://happy.m.jd.com/babelDiy/GZWVJFLMXBQVEBDQZWMY/XJf8bH6oXDWSgS91daDJzXh9bU7/index.html" target="_blank" rel="noopener">京东双十一</a>(或直接输入网址：<a href="https://happy.m.jd.com/babelDiy/GZWVJFLMXBQVEBDQZWMY/XJf8bH6oXDWSgS91daDJzXh9bU7/index.html" target="_blank" rel="noopener">https://happy.m.jd.com/babelDiy/GZWVJFLMXBQVEBDQZWMY/XJf8bH6oXDWSgS91daDJzXh9bU7/index.html</a>)</li><li>浏览器打开上面页面之后，按键盘上的F12，打开控制台（console）。</li><li>在控制台输入下面代码，按回车运行：</li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">javascript</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> productList=[],shopList=[],url=<span class="string">"https://api.m.jd.com/client.action"</span>;<span class="function"><span class="keyword">function</span> <span class="title">autoPost</span>(<span class="params">id,type</span>)</span>{fetch(<span class="string">`<span class="subst">${url}</span>?timestamp=<span class="subst">${<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()}</span>`</span>,{<span class="attr">method</span>:<span class="string">"POST"</span>,<span class="attr">mode</span>:<span class="string">"cors"</span>,<span class="attr">credentials</span>:<span class="string">"include"</span>,<span class="attr">headers</span>:{<span class="string">"Content-Type"</span>:<span class="string">"application/x-www-form-urlencoded"</span>},<span class="attr">body</span>:<span class="string">`functionId=raisepacket_collectScore&body={"type":<span class="subst">${type}</span>,"ext":"<span class="subst">${id}</span>","appsign":1,"msgsign":2}&client=wh5`</span>}).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>{<span class="keyword">return</span> response.json()}).then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>{<span class="built_in">console</span>.log(res.data.biz_msg)})}<span class="function"><span class="keyword">function</span> <span class="title">start</span>(<span class="params"></span>)</span>{fetch(<span class="string">`<span class="subst">${url}</span>?<span class="subst">${<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()}</span>`</span>,{<span class="attr">method</span>:<span class="string">"POST"</span>,<span class="attr">mode</span>:<span class="string">"cors"</span>,<span class="attr">credentials</span>:<span class="string">"include"</span>,<span class="attr">headers</span>:{<span class="string">"Content-Type"</span>:<span class="string">"application/x-www-form-urlencoded"</span>},<span class="attr">body</span>:<span class="string">'functionId=raisepacket_getShopAndProductList&body=&client=wh5'</span>}).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>{<span class="keyword">return</span> response.json()}).then(<span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>{productList=res.data.result.productList;shopList=res.data.result.shopList;<span class="built_in">console</span>.log(<span class="string">`获取到任务,商品：<span class="subst">${productList.length}</span>商品：<span class="subst">${shopList.length}</span>`</span>);autoProductTask()})}<span class="function"><span class="keyword">function</span> <span class="title">autoProductTask</span>(<span class="params"></span>)</span>{<span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,leng=productList.length;i<leng;i++){(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</leng;i++){(<span></span>{setTimeout(<span class="function"><span class="params">()</span>=></span>{<span class="keyword">let</span> item=productList[index];autoPost(item[<span class="string">'id'</span>],<span class="number">4</span>);<span class="built_in">console</span>.log(<span class="string">`商品总任务数：<span class="subst">${leng}</span>当前任务数：<span class="subst">${index+<span class="number">1</span>}</span>`</span>);<span class="keyword">if</span>(leng<span class="number">-1</span>==index){autoShopTask()}},index*<span class="number">1500</span>)})(i)}}<span class="function"><span class="keyword">function</span> <span class="title">autoShopTask</span>(<span class="params"></span>)</span>{<span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,leng=shopList.length;i<leng;i++){(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>){setTimeout(<span class="function"><span class="params">()</span>=></span>{<span class="keyword">let</span> item=shopList[index];autoPost(item[<span class="string">'id'</span>],<span class="number">2</span>);<span class="built_in">console</span>.log(<span class="string">`商铺总任务数：<span class="subst">${leng}</span>当前任务数：<span class="subst">${index+<span class="number">1</span>}</span>`</span>);<span class="keyword">if</span>(leng<span class="number">-1</span>==index){autoPlay()}},index*<span class="number">1500</span>)})(i)}}<span class="function"><span class="keyword">function</span> <span class="title">autoPlay</span>(<span class="params"></span>)</span>{<span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,leng=<span class="number">4</span>;i<leng;i++){(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>){setTimeout(<span class="function"><span class="params">()</span>=></span>{autoPost(<span class="number">0</span>,<span class="number">5</span>);<span class="built_in">console</span>.log(<span class="string">`好玩互动：<span class="subst">${leng}</span>当前任务数：<span class="subst">${index+<span class="number">1</span>}</span>`</span>);<span class="keyword">if</span>(leng<span class="number">-1</span>==index){autoInteract()}},index*<span class="number">1000</span>)})(i)}}<span class="function"><span class="keyword">function</span> <span class="title">autoInteract</span>(<span class="params"></span>)</span>{<span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,leng=<span class="number">4</span>;i<leng;i++){(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>){setTimeout(<span class="function"><span class="params">()</span>=></span>{autoPost(<span class="number">0</span>,<span class="number">10</span>);<span class="built_in">console</span>.log(<span class="string">`视频直播：<span class="subst">${leng}</span>当前任务数：<span class="subst">${index+<span class="number">1</span>}</span>`</span>);<span class="keyword">if</span>(leng<span class="number">-1</span>==index){autoShopping()}},index*<span class="number">1000</span>)})(i)}}<span class="function"><span class="keyword">function</span> <span class="title">autoShopping</span>(<span class="params"></span>)</span>{<span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,leng=<span class="number">3</span>;i<leng;i++){(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>){setTimeout(<span class="function"><span class="params">()</span>=></span>{autoPost(<span class="number">0</span>,<span class="number">3</span>);<span class="built_in">console</span>.log(<span class="string">`精彩会场：<span class="subst">${leng}</span>当前任务数：<span class="subst">${index+<span class="number">1</span>}</span>`</span>)},index*<span class="number">1000</span>)})(i)}}start();<br></leng;i++){(<span></leng;i++){(<span></leng;i++){(<span></leng;i++){(<span></pre></td></tr></tbody></table></figure></div><p>如下页面：</p><p><img alt="overwrote existing file" data-src="/images/jingdong1111.png" class="lazyload"></p></body></html>]]></content>
      
      
      
        <tags>
            
            <tag> 薅羊毛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker安装Hadoop、Hbase、Zookeeper、Phoenix伪集群</title>
      <link href="/2019/10/24/Docker%E5%AE%89%E8%A3%85Hadoop%E3%80%81Hbase%E3%80%81Zookeeper%E3%80%81Phoenix%E4%BC%AA%E9%9B%86%E7%BE%A4-1/"/>
      <url>/2019/10/24/Docker%E5%AE%89%E8%A3%85Hadoop%E3%80%81Hbase%E3%80%81Zookeeper%E3%80%81Phoenix%E4%BC%AA%E9%9B%86%E7%BE%A4-1/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body><h3 id="Docker安装Hadoop、Hbase、Zookeeper、Phoenix伪集群"><a href="#Docker安装Hadoop、Hbase、Zookeeper、Phoenix伪集群" class="headerlink" title="Docker安装Hadoop、Hbase、Zookeeper、Phoenix伪集群"></a>Docker安装Hadoop、Hbase、Zookeeper、Phoenix伪集群</h3><hr><p>准备条件：</p><ul><li>安装docker</li><li>docker容器配置内存8G及以上</li><li>shell命令行或者Mac控制台</li><li>安装Kitematic</li></ul><blockquote><p>Hadoop /Hbase/Zookeeper/phoenix安装环境已经集成在mysaber/hadoop：0.2.2镜像中，简单配置即可。</p></blockquote><h4 id="拉取docker镜像"><a href="#拉取docker镜像" class="headerlink" title="拉取docker镜像"></a>拉取docker镜像</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull mysaber/hadoop:0.2.2</span></span><br></pre></td></tr></tbody></table></figure></div><h4 id="使用命令查看docker镜像"><a href="#使用命令查看docker镜像" class="headerlink" title="使用命令查看docker镜像"></a>使用命令查看docker镜像</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">  docker images</span></span><br><span class="line">REPOSITORY                                      TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">mysaber/hadoop                                  0.2.2               89e80d91b1a5        3 days ago          4.14GB</span><br></pre></td></tr></tbody></table></figure></div><p>出现对应镜像表示拉取成功。</p><h4 id="配置对应的启动脚本文件“start-container-sh”"><a href="#配置对应的启动脚本文件“start-container-sh”" class="headerlink" title="配置对应的启动脚本文件“start-container.sh”"></a>配置对应的启动脚本文件“start-container.sh”</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> the default node number is 3</span></span><br><span class="line">N=${1:-3}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> start hadoop master container docker rm -f master &> /dev/null</span></span><br><span class="line">echo "start hadoopmaster container..."</span><br><span class="line"> docker run -itd \</span><br><span class="line"><span class="meta"> #</span><span class="bash">-v后两个参数，冒号前，为本地路径，后面用<span class="variable">${localPath}</span>代替，冒号后为容器路径，之后用<span class="variable">${serverPath}</span>代替</span></span><br><span class="line">-v ${localPath}:/opt/docker \</span><br><span class="line">                --net=hadoop \</span><br><span class="line">                -p 50070:50070 \</span><br><span class="line">-p 2181:2181 \</span><br><span class="line">                -p 8088:8088 \</span><br><span class="line">-p 8765:8765 \</span><br><span class="line">                -p 60010:60010 \</span><br><span class="line">-p 16020:16020 \</span><br><span class="line">-p 16000:16000 \</span><br><span class="line">                -e ZOO_MY_ID=1 \</span><br><span class="line">                --name master \</span><br><span class="line">                --hostname master \</span><br><span class="line">                mysaber/hadoop:0.2.2 &> /dev/null</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> start hadoop slave container</span></span><br><span class="line">i=1</span><br><span class="line">while [ $i -lt $N ]</span><br><span class="line">do</span><br><span class="line">docker rm -f slave$i &> /dev/null</span><br><span class="line">echo "start hadoop-slave$i container..."</span><br><span class="line">docker run -itd \</span><br><span class="line">-v ${localPath}:/opt/docker \</span><br><span class="line">                --net=hadoop \</span><br><span class="line">-p $((2181+$i)):2181 \</span><br><span class="line">                --name slave$i \</span><br><span class="line">                --hostname slave$i \</span><br><span class="line">                -e ZOO_MY_ID=$(($i+1)) \</span><br><span class="line">                mysaber/hadoop:0.2.2 &> /dev/null</span><br><span class="line">i=$(( $i + 1 ))</span><br><span class="line">done </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> get into hadoop master container</span></span><br><span class="line"><span class="meta">#</span><span class="bash">docker <span class="built_in">exec</span> -it master bash</span></span><br></pre></td></tr></tbody></table></figure></div><p>脚本将会启动三个容器，一个master、两个slave（slave1、slave2)</p><h4 id="使用Kitematic查看已经启动的镜像容器，选中master。点击exec可以进入容器内部。"><a href="#使用Kitematic查看已经启动的镜像容器，选中master。点击exec可以进入容器内部。" class="headerlink" title="使用Kitematic查看已经启动的镜像容器，选中master。点击exec可以进入容器内部。"></a>使用Kitematic查看已经启动的镜像容器，选中master。点击exec可以进入容器内部。</h4><p><img alt="image-20191024093325950" data-src="/images/kitematic.png" class="lazyload"></p><blockquote><p>如果没有安装Kitematic，则可以使用下面命令登陆容器内部：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps -a</span></span><br><span class="line">CONTAINER ID        IMAGE                  COMMAND             CREATED             STATUS              PORTS                                                                                                                                                                                      NAMES</span><br><span class="line">2c6e954fd7a0        mysaber/hadoop:0.2.2   "/bin/bash"         37 minutes ago      Up 37 minutes       8081/tcp, 8088/tcp, 8765/tcp, 50070/tcp, 60010/tcp, 0.0.0.0:2183->2181/tcp                                                                                                                 slave2</span><br><span class="line">88deb95f7195        mysaber/hadoop:0.2.2   "/bin/bash"         37 minutes ago      Up 37 minutes       8081/tcp, 8088/tcp, 8765/tcp, 50070/tcp, 60010/tcp, 0.0.0.0:2182->2181/tcp                                                                                                                 slave1</span><br><span class="line">cd06942e2c58        mysaber/hadoop:0.2.2   "/bin/bash"         37 minutes ago      Up 37 minutes       0.0.0.0:2181->2181/tcp, 0.0.0.0:8088->8088/tcp, 0.0.0.0:8765->8765/tcp, 0.0.0.0:16000->16000/tcp, 0.0.0.0:16020->16020/tcp, 0.0.0.0:50070->50070/tcp, 0.0.0.0:60010->60010/tcp, 8081/tcp   master</span><br></pre></td></tr></tbody></table></figure></div><p>查看容器对应的container id</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it cd06942e2c58 /bin/bash</span></span><br><span class="line">[root@master /]# </span><br></pre></td></tr></tbody></table></figure></div><p>出现以上结果表明正确进入容器内部。</p></blockquote><h4 id="在master容器中，修改hbase配置文件："><a href="#在master容器中，修改hbase配置文件：" class="headerlink" title="在master容器中，修改hbase配置文件："></a>在master容器中，修改hbase配置文件：</h4><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@master /]# vim  /opt/hbase/conf/hbase-site.xml</span><br></pre></td></tr></tbody></table></figure></div><p>在其中加入下面配置：(在标签<configuration>…</configuration>中，与其他property同级)</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag"><<span class="name">property</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">name</span>></span>fs.default.name<span class="tag"><!--<span class="name"-->name</span>></span><br><span class="line">        <span class="tag"><<span class="name">value</span>></span>hdfs://master:9000<span class="tag"><!--<span class="name"-->value</span>></span><br><span class="line"><span class="tag"><!--<span class="name"-->property</span>></span><br></pre></td></tr></tbody></table></figure></div><p>在${localPath}新建编辑脚本文件start-all.sh：（或在/opt/docker目录下执行 vim start-all.sh)</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">echo "开始启动master。。。"</span><br><span class="line"></span><br><span class="line">sh /opt/hadoop/sbin/stop-all.sh</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">sh /opt/hadoop/bin/hadoop namenode -format</span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">sh /opt/hadoop/sbin/start-all.sh</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">sh /opt/hadoop/bin/hdfs dfsadmin -safemode leave</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">sh /opt/zookeeper/bin/zkServer.sh start</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">echo "master的hadoop和zookeeper启动完成！"</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ssh root@slave1 > /dev/null 2>&1 << eeooff</span><br><span class="line"></span><br><span class="line">echo "2" > "/opt/zookeeper/zkdata/myid"</span><br><span class="line"></span><br><span class="line">cat /opt/zookeeper/zkdata/myid</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">sh /opt/zookeeper/bin/zkServer.sh start</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">exit</span><br><span class="line">eeooff</span><br><span class="line">echo "slave1的zookeeper启动完成！"</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ssh root@slave2 > /dev/null 2>&1 << eeooffw</span><br><span class="line">echo "3" > "/opt/zookeeper/zkdata/myid"</span><br><span class="line"></span><br><span class="line">cat /opt/zookeeper/zkdata/myid</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">sh /opt/zookeeper/bin/zkServer.sh start</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">exit</span><br><span class="line">eeooffw</span><br><span class="line">echo "slave2的zookeeper启动完成！"</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sh /opt/hbase/bin/start-hbase.sh</span><br><span class="line"></span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">echo "hbase启动完成！"</span><br><span class="line"></span><br><span class="line">sh /opt/hbase/bin/hbase shell</span><br></pre></td></tr></tbody></table></figure></div><p>切换到master容器，执行命令：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">sh-4.2# cd /opt/docker/</span><br><span class="line">sh-4.2# sh start-all.sh</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">hbase启动完成！</span><br><span class="line">2019-10-24 01:13:29,343 WARN  [main] util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</span><br><span class="line">HBase Shell</span><br><span class="line">Use "help" to get list of supported commands.</span><br><span class="line">Use "exit" to quit this interactive shell.</span><br><span class="line">Version 2.0.0, r7483b111e4da77adbfc8062b3b22cbe7c2cb91c1, Sun Apr 22 20:26:55 PDT 2018</span><br><span class="line">Took 0.0032 seconds</span><br><span class="line">hbase(main):001:0></span><br></pre></td></tr></tbody></table></figure></div><p>出现以上结果，表示hadoop、zookeeper、hbase集群已经启动完成。可以再hbase中进行验证：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">hbase(main):001:0> list</span><br><span class="line">TABLE</span><br><span class="line">0 row(s)</span><br><span class="line">Took 0.6531 seconds</span><br><span class="line">=> []</span><br><span class="line">hbase(main):002:0> create 'user','info'</span><br><span class="line">Created table user</span><br><span class="line">Took 0.9004 seconds</span><br><span class="line">=> Hbase::Table - user</span><br></pre></td></tr></tbody></table></figure></div><p>成功执行以上两条命令，表明hbase的查询和创建表都是正常的，如果出现问题的话，可以查看/opt/hbase/logs/中对应的log文件抛出的异常来进行排查。</p><blockquote><p>从服务列表中排查是否出错：在master中通过命令查询当前容器启动的服务列表：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 执行jps命令</span></span></span><br><span class="line">sh-4.2# jps</span><br><span class="line">896 SecondaryNameNode————hadoop的secondaryNameNode服务</span><br><span class="line">1507 HMaster————hbase的Hmaster服务</span><br><span class="line">1379 QuorumPeerMain————zookeeper服务</span><br><span class="line">1062 ResourceManager————hadoop的ResourceManager服务</span><br><span class="line">1611 HRegionServer————hbase的HRegionServer服务</span><br><span class="line">652 NameNode————hadoop的NameNode服务</span><br><span class="line">2094 Jps</span><br></pre></td></tr></tbody></table></figure></div><p>如果上述6个服务都启动成功，表明master中的服务正常。切换到slave中继续查看</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 切换到slave1容器，可同理切换到slave2容器</span></span></span><br><span class="line">sh-4.2# ssh slave1</span><br><span class="line">Last login: Tue Oct  8 09:22:02 2019 from master</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 执行jps命令</span></span></span><br><span class="line">[root@slave1 ~]# jps</span><br><span class="line">480 HRegionServer————hbase的HRegionServer服务</span><br><span class="line">130 DataNode————hadoop的DataNode服务</span><br><span class="line">402 QuorumPeerMain————zookeeper服务</span><br><span class="line">245 NodeManager————hadoop的NodeManager服务</span><br><span class="line">856 Jps</span><br></pre></td></tr></tbody></table></figure></div><p>slave1和slave2中的服务应该相同，如果出现缺少某服务的情况，可在对应容器中，cd到对应服务的目录下/opt/hadoop|hbase|zookeeper的logs目录中查看对应服务的启动运行日志。</p></blockquote><h4 id="配置Phoenix"><a href="#配置Phoenix" class="headerlink" title="配置Phoenix"></a>配置Phoenix</h4><p>切换到master容器，进入phoenix目录：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@slave1 ~]# ssh master</span><br><span class="line">Last login: Tue Oct  8 09:22:02 2019 from master</span><br><span class="line">[root@master ~]# cd /opt/phoenix/bin/</span><br><span class="line">[root@master bin]#</span><br></pre></td></tr></tbody></table></figure></div><p>启动phoenix的queryserver：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@master bin]# ./queryserver.py start</span><br><span class="line">starting Query Server, logging to /tmp/phoenix/phoenix-root-queryserver.log</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 检查queryserver是否已经启动</span></span></span><br><span class="line">[root@master bin]# jps</span><br><span class="line">896 SecondaryNameNode</span><br><span class="line">2624 Jps</span><br><span class="line">1507 HMaster</span><br><span class="line">1379 QuorumPeerMain</span><br><span class="line">2596 QueryServer————phoenix的queryserver服务</span><br><span class="line">1062 ResourceManager</span><br><span class="line">1611 HRegionServer</span><br><span class="line">652 NameNode</span><br></pre></td></tr></tbody></table></figure></div><h4 id="phoenix命令行"><a href="#phoenix命令行" class="headerlink" title="phoenix命令行"></a>phoenix命令行</h4><p>phoenix也提供了一个类似于MySQL的命令行的工具，在phoenix的bin目录下执行：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">[root@master bin]# ./sqlline.py</span><br><span class="line">Setting property: [incremental, false]</span><br><span class="line">Setting property: [isolation, TRANSACTION_READ_COMMITTED]</span><br><span class="line">issuing: !connect jdbc:phoenix: none none org.apache.phoenix.jdbc.PhoenixDriver</span><br><span class="line">Connecting to jdbc:phoenix:</span><br><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding in [jar:file:/opt/phoenix/phoenix-5.0.0-HBase-2.0-client.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding in [jar:file:/opt/hadoop/share/hadoop/common/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.</span><br><span class="line">19/10/24 02:31:53 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</span><br><span class="line">Connected to: Phoenix (version 5.0)</span><br><span class="line">Driver: PhoenixEmbeddedDriver (version 5.0)</span><br><span class="line">Autocommit status: true</span><br><span class="line">Transaction isolation: TRANSACTION_READ_COMMITTED</span><br><span class="line">Building list of tables and columns for tab-completion (set fastconnect to true to skip)...</span><br><span class="line">133/133 (100%) Done</span><br><span class="line">Done</span><br><span class="line">sqlline version 1.2.0</span><br><span class="line">0: jdbc:phoenix:></span><br></pre></td></tr></tbody></table></figure></div><p>出现上述结果表示成功进入phoenix，可以尝试执行创建表格（创建表格注意事项，在下方有提及）</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">0: jdbc:phoenix:> create table visit_details (</span><br><span class="line">        inc_id varchar(32) not null,</span><br><span class="line">        area_code varchar(32)  ,</span><br><span class="line">        area_name varchar(32)  ,</span><br><span class="line">        department_code varchar(32)  ,</span><br><span class="line">        department_name varchar(32)  ,</span><br><span class="line">        visit_type tinyint default 0  ,</span><br><span class="line">        patient_code varchar(32) not null  ,</span><br><span class="line">        address varchar(128)   ,</span><br><span class="line">        address_split varchar(128) ,</span><br><span class="line">        address_province varchar(32) ,</span><br><span class="line">        address_city varchar(32)   ,</span><br><span class="line">        address_district varchar(32)  ,</span><br><span class="line">        address_town varchar(32)  ,</span><br><span class="line">        address_street varchar(128) ,</span><br><span class="line">        gender tinyint default 0 ,</span><br><span class="line">        age integer ,</span><br><span class="line">        visit_at timestamp ,</span><br><span class="line">        operate_at timestamp ,</span><br><span class="line">        created_at timestamp not null ,</span><br><span class="line">        updated_at timestamp not null </span><br><span class="line">  CONSTRAINT PK PRIMARY KEY (inc_id, patient_code, created_at, updated_at) </span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure></div><p>phoenix的表格默认为全局索引，在本docker镜像中已经配置了对应的耳机索引，可通过下方命令创建索引：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">0: jdbc:phoenix:> create index op_index on visit_details(operate_at);</span><br><span class="line">No rows affected (5.957 seconds)</span><br></pre></td></tr></tbody></table></figure></div><p>通过!table命令查看表格以及索引：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">0: jdbc:phoenix:> !table</span><br><span class="line">+------------+--------------+----------------+---------------+----------+------------+----------------------------+-----------------+--------------+-----------------+---------------+---------------+-----------------+------------+-------------+----------------+--+</span><br><span class="line">| TABLE_CAT  | TABLE_SCHEM  |   TABLE_NAME   |  TABLE_TYPE   | REMARKS  | TYPE_NAME  | SELF_REFERENCING_COL_NAME  | REF_GENERATION  | INDEX_STATE  | IMMUTABLE_ROWS  | SALT_BUCKETS  | MULTI_TENANT  | VIEW_STATEMENT  | VIEW_TYPE  | INDEX_TYPE  | TRANSACTIONAL  |  |</span><br><span class="line">+------------+--------------+----------------+---------------+----------+------------+----------------------------+-----------------+--------------+-----------------+---------------+---------------+-----------------+------------+-------------+----------------+--+</span><br><span class="line">|            |              | OP_INDEX       | INDEX         |          |            |                            |                 | ACTIVE       | false           | null          | false         |                 |            | GLOBAL      | false          |  |</span><br><span class="line">|            | SYSTEM       | CATALOG        | SYSTEM TABLE  |          |            |                            |                 |              | false           | null          | false         |                 |            |             | false          |  |</span><br><span class="line">|            | SYSTEM       | FUNCTION       | SYSTEM TABLE  |          |            |                            |                 |              | false           | null          | false         |                 |            |             | false          |  |</span><br><span class="line">|            | SYSTEM       | LOG            | SYSTEM TABLE  |          |            |                            |                 |              | true            | 32            | false         |                 |            |             | false          |  |</span><br><span class="line">|            | SYSTEM       | SEQUENCE       | SYSTEM TABLE  |          |            |                            |                 |              | false           | null          | false         |                 |            |             | false          |  |</span><br><span class="line">|            | SYSTEM       | STATS          | SYSTEM TABLE  |          |            |                            |                 |              | false           | null          | false         |                 |            |             | false          |  |</span><br><span class="line">|            |              | VISIT_DETAILS  | TABLE         |          |            |                            |                 |              | false           | null          | false         |                 |            |             | false          |  |</span><br><span class="line">+------------+--------------+----------------+---------------+----------+------------+----------------------------+-----------------+--------------+-----------------+---------------+---------------+-----------------+------------+-------------+----------------+--+</span><br></pre></td></tr></tbody></table></figure></div><p>接下来使用dataX将MySQL数据导入phoenix，接下来使用dataX将MySQL数据导入phoenix，phoenix的使用注意事项，可以查看：<a href="http://www.dizent.cn/2019/10/16/Phoenix/" target="_blank" rel="noopener">使用DATAX将MySQL导入Phoenix</a></p></body></html>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bigdata </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用DATAX将MySQL导入Phoenix</title>
      <link href="/2019/10/16/Phoenix/"/>
      <url>/2019/10/16/Phoenix/</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body><h2 id="使用DATAX将MySQL导入Phoenix"><a href="#使用DATAX将MySQL导入Phoenix" class="headerlink" title="使用DATAX将MySQL导入Phoenix"></a>使用DATAX将MySQL导入Phoenix</h2><h3 id="安装Hadoop、Zookeeper、Hbase-2-X、Phoenix-5-X"><a href="#安装Hadoop、Zookeeper、Hbase-2-X、Phoenix-5-X" class="headerlink" title="安装Hadoop、Zookeeper、Hbase 2.X、Phoenix 5.X"></a>安装Hadoop、Zookeeper、Hbase 2.X、Phoenix 5.X</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull mysaber/hadoop 0.1.5</span></span><br></pre></td></tr></tbody></table></figure></div><h3 id="配置Phoenix-5-X"><a href="#配置Phoenix-5-X" class="headerlink" title="配置Phoenix 5.X"></a>配置Phoenix 5.X</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">//复制hbase配置到phoenix</span><br><span class="line"><span class="meta">$</span><span class="bash"> cp {HBase_Home}/conf/hbase-site.xml {phoenix_home}/bin/</span></span><br><span class="line">//拷贝phoenix下的把 phoenix-<version>-server.jar、phoenix-core-<version>.jar 拷贝到hbaseServer的lib目录下{Hbase_Home}/lib</version></version></span><br></pre></td></tr></tbody></table></figure></div><h3 id="下载DataX源码并进行编译"><a href="#下载DataX源码并进行编译" class="headerlink" title="下载DataX源码并进行编译"></a>下载DataX源码并进行编译</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/alibaba/DataX.git</span></span><br></pre></td></tr></tbody></table></figure></div><h3 id="在Phoenix中创建与MySQL相对应的table"><a href="#在Phoenix中创建与MySQL相对应的table" class="headerlink" title="在Phoenix中创建与MySQL相对应的table"></a>在Phoenix中创建与MySQL相对应的table</h3><p>Phoenix的数据类型,注意修改MySQL表中数据到对应数据类型，另外not null需要与primary key联合使用</p><ul><li>INTEGER</li><li>UNSIGNED_INT</li><li>BIGINT</li><li>UNSIGNED_LONG</li><li>TINYINT</li><li>UNSIGNED_TINYINT</li><li>SMALLINT</li><li>UNSIGNED_SMALLINT</li><li>FLOAT</li><li>UNSIGNED_FLOAT</li><li>DOUBLE</li><li>UNSIGNED_DOUBLE</li><li>DECIMAL</li><li>BOOLEAN</li><li>TIME</li><li>DATE</li><li>TIMESTAMP</li><li>UNSIGNED_TIME</li><li>UNSIGNED_DATE</li><li>UNSIGNED_TIMESTAMP</li><li>VARCHAR</li><li>CHAR</li><li>BINARY</li><li>VARBINARY</li><li>ARRAY</li></ul><p>例如驾驶舱中的visit_details可修改为：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">create table visit_details (</span><br><span class="line">        inc_id varchar(32) not null,</span><br><span class="line">        area_code varchar(32)  ,</span><br><span class="line">        area_name varchar(32)  ,</span><br><span class="line">        department_code varchar(32)  ,</span><br><span class="line">        department_name varchar(32)  ,</span><br><span class="line">        visit_type tinyint default 0  ,</span><br><span class="line">        patient_code varchar(32) not null  ,</span><br><span class="line">        address varchar(128)   ,</span><br><span class="line">        address_split varchar(128) ,</span><br><span class="line">        address_province varchar(32) ,</span><br><span class="line">        address_city varchar(32)   ,</span><br><span class="line">        address_district varchar(32)  ,</span><br><span class="line">        address_town varchar(32)  ,</span><br><span class="line">        address_street varchar(128) ,</span><br><span class="line">        gender tinyint default 0 ,</span><br><span class="line">        age integer ,</span><br><span class="line">        visit_at timestamp ,</span><br><span class="line">        operate_at timestamp ,</span><br><span class="line">        created_at timestamp not null ,</span><br><span class="line">        updated_at timestamp not null </span><br><span class="line">  CONSTRAINT PK PRIMARY KEY (inc_id, patient_code, created_at, updated_at) </span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure></div><p>插入语句示例：</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">UPSERT INTO visit_details(inc_id, area_code, area_name, department_code, department_name, visit_type, patient_code, address, address_split, address_province, address_city, address_district, address_town, address_street, gender, age, visit_at, operate_at, created_at, updated_at) VALUES ('0000011ccc654b518edbce2b3e58afa2', '9', '江南分院', '0204', '江南急诊科', 1, '1000003834429', '重庆市万州区石峰路999号', '重庆市-万州区-石峰路999号', '重庆市', NULL, '万州区', NULL, '石峰路999号', 1, 3, '2019-02-10 22:43:11', '2019-02-10 20:29:19', '2019-08-01 00:39:43', '2019-08-01 00:39:43');</span><br></pre></td></tr></tbody></table></figure></div><blockquote><p>Datax源码编译（源码plugins太多，可以将主目录下pom.xml文件中的不需要的module注释掉）</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span>  {DataX_source_code_home}</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mvn -U clean package assembly:assembly -Dmaven.test.skip=<span class="literal">true</span></span></span><br></pre></td></tr></tbody></table></figure></div></blockquote><p>在编译的目录下，进入target目录，可以找到编译后的datax。</p><blockquote><p>Phoenix开启QueryServer;服务器需要开启8765端口，docker则需要开放并映射8765端口</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> {Phoenix_Home}/bin</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./queryServer.py start</span></span><br></pre></td></tr></tbody></table></figure></div></blockquote><p>编辑DataX的Job文件：</p><ol><li><p>新建一个json文件：mysql2phoenix.json</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang"></div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  job:{</span><br><span class="line">"content":[</span><br><span class="line">{</span><br><span class="line"><span class="attr">"reader"</span>:$Reader_Object,</span><br><span class="line"><span class="attr">"writer"</span>:$Writer_Object</span><br><span class="line">}</span><br><span class="line">],</span><br><span class="line">"setting":{</span><br><span class="line">"speed":{</span><br><span class="line">"byte":1048576,</span><br><span class="line">      <span class="comment">//同时开启的进程数</span></span><br><span class="line">"channel":16,</span><br><span class="line">      <span class="comment">//分片的记录条数</span></span><br><span class="line">"record":10000</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>Reader Object</p></li></ol><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">     <span class="comment">//name为datax的plugin目录下的插件名</span></span><br><span class="line">     <span class="attr">"name"</span>:<span class="string">"mysqlreader"</span>, </span><br><span class="line">     <span class="comment">//paramter为插件所需要的参数，各插件各不相同</span></span><br><span class="line"><span class="attr">"parameter"</span>:{</span><br><span class="line"><span class="attr">"connection"</span>:[</span><br><span class="line">{</span><br><span class="line">           <span class="comment">//mysql连接地址，可配多个</span></span><br><span class="line"><span class="attr">"jdbcUrl"</span>:[</span><br><span class="line"><span class="string">"jdbc:mysql://localhost:3306/odc_v2"</span></span><br><span class="line">],</span><br><span class="line">           <span class="comment">//mysql查询SQL语句，列名顺序和列数需要和writer中的相同</span></span><br><span class="line"><span class="attr">"querySql"</span>:[</span><br><span class="line"><span class="string">"select * from visit_details;"</span></span><br><span class="line">]</span><br><span class="line">}</span><br><span class="line">],</span><br><span class="line"><span class="attr">"password"</span>:<span class="string">"******"</span>,</span><br><span class="line"><span class="attr">"username"</span>:<span class="string">"root"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><p>Writer_Object</p><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">json</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="comment">//write的插件名</span></span><br><span class="line"><span class="attr">"name"</span>:<span class="string">"hbase20xsqlwriter"</span>,</span><br><span class="line"><span class="attr">"parameter"</span>:{</span><br><span class="line">          <span class="comment">//单次提交的条数</span></span><br><span class="line"><span class="attr">"batchSize"</span>:<span class="string">"100"</span>,</span><br><span class="line"><span class="attr">"column"</span>:[</span><br><span class="line"><span class="string">"INC_ID"</span>,</span><br><span class="line"><span class="string">"AREA_CODE"</span>,</span><br><span class="line"><span class="string">"AREA_NAME"</span>,</span><br><span class="line"><span class="string">"DEPARTMENT_CODE"</span>,</span><br><span class="line"><span class="string">"DEPARTMENT_NAME"</span>,</span><br><span class="line"><span class="string">"VISIT_TYPE"</span>,</span><br><span class="line"><span class="string">"PATIENT_CODE"</span>,</span><br><span class="line"><span class="string">"ADDRESS"</span>,</span><br><span class="line"><span class="string">"ADDRESS_SPLIT"</span>,</span><br><span class="line"><span class="string">"ADDRESS_PROVINCE"</span>,</span><br><span class="line"><span class="string">"ADDRESS_CITY"</span>,</span><br><span class="line"><span class="string">"ADDRESS_DISTRICT"</span>,</span><br><span class="line"><span class="string">"ADDRESS_TOWN"</span>,</span><br><span class="line"><span class="string">"ADDRESS_STREET"</span>,</span><br><span class="line"><span class="string">"GENDER"</span>,</span><br><span class="line"><span class="string">"AGE"</span>,</span><br><span class="line"><span class="string">"VISIT_AT"</span>,</span><br><span class="line"><span class="string">"OPERATE_AT"</span>,</span><br><span class="line"><span class="string">"CREATED_AT"</span>,</span><br><span class="line"><span class="string">"UPDATED_AT"</span></span><br><span class="line">],</span><br><span class="line">          <span class="comment">//空值处理策略，有skip和set null</span></span><br><span class="line"><span class="attr">"nullMode"</span>:<span class="string">"skip"</span>,</span><br><span class="line">          <span class="comment">//服务地址</span></span><br><span class="line"><span class="attr">"queryServerAddress"</span>:<span class="string">"http://server-Ip:8765"</span>,</span><br><span class="line"><span class="comment">//写入表</span></span><br><span class="line">          <span class="attr">"table"</span>:<span class="string">"VISIT_DETAILS"</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div><h3 id="运行DataX"><a href="#运行DataX" class="headerlink" title="运行DataX"></a>运行DataX</h3><div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">python</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">$ cd {DataX_Home}/bin</span><br><span class="line">$ python datax.py {Your_Job_Path}/mysql2phoenix.json</span><br></pre></td></tr></tbody></table></figure></div></body></html>]]></content>
      
      
      <categories>
          
          <category> 中间件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bigdata </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title></title>
      <link href="/404.html"/>
      <url>/404.html</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script>  <meta http-equiv="content-type" content="text/html;charset=utf-8;">  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">  <meta name="robots" content="all">  <meta name="robots" content="index,follow">  <link rel="stylesheet" type="text/css" href="https://qzone.qq.com/gy/404/style/404style.css"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Dizent" type="application/atom+xml"></head><body>  <script type="text/plain" src="http://www.qq.com/404/search_children.js" charset="utf-8" homepageurl="/" homepagename="回到我的主页">  </script>  <script src="https://qzone.qq.com/gy/404/data.js" charset="utf-8"></script>  <script src="https://qzone.qq.com/gy/404/page.js" charset="utf-8"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/assets/tororo.model.json"},"display":{"superSample":2,"width":120,"height":200,"position":"left","hOffset":20,"vOffset":50},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/manifest.json"/>
      <url>/manifest.json</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body>{"name":"Dizent","short_name":"dizent","theme_color":"#2196f3","background_color":"#2196f3","display":"standalone","Scope":"/","start_url":"/","icons":[{"src":"images/icons/icon-72x72.png","sizes":"72x72","type":"image/png"},{"src":"images/icons/icon-96x96.png","sizes":"96x96","type":"image/png"},{"src":"images/icons/icon-128x128.png","sizes":"128x128","type":"image/png"},{"src":"images/icons/icon-144x144.png","sizes":"144x144","type":"image/png"},{"src":"images/icons/icon-152x152.png","sizes":"152x152","type":"image/png"},{"src":"images/icons/icon-192x192.png","sizes":"192x192","type":"image/png"},{"src":"images/icons/icon-384x384.png","sizes":"384x384","type":"image/png"},{"src":"images/icons/icon-512x512.png","sizes":"512x512","type":"image/png"}],"splash_pages":null}</body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>关于我</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body><p><strong>95后Java程序猿</strong></p><p><strong>在技术提升的道路上磕磕绊绊，希望能找到一起前行的伙伴</strong></p></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/404/index.html"/>
      <url>/404/index.html</url>
      
        <content type="html"><![CDATA[<html lang="en"><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script>            <meta charset="UTF-8">        <title>404</title>    <meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Dizent" type="application/atom+xml"></head>    <body>        <script type="text/javascript" src="//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js" charset="utf-8"></script>    <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/assets/tororo.model.json"},"display":{"superSample":2,"width":120,"height":200,"position":"left","hOffset":20,"vOffset":50},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>books</title>
      <link href="/books/index.html"/>
      <url>/books/index.html</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>分类</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>movies</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>友情链接</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>记录世界的美好</title>
      <link href="/photos/index.html"/>
      <url>/photos/index.html</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>🎵Dizent音乐台</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body><blockquote><h3 id="纯音乐"><a href="#纯音乐" class="headerlink" title="纯音乐"></a>纯音乐</h3></blockquote>    <div id="aplayer-hnyoqkBk" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="115264805" data-server="netease" data-type="playlist" data-mode="circulation" data-autoplay="true" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div><blockquote><h3 id="小语种"><a href="#小语种" class="headerlink" title="小语种"></a>小语种</h3></blockquote>    <div id="aplayer-CrzqPYBY" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="135000374" data-server="netease" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>分类</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script></head><body></body></html>]]></content>
      
    </entry>
    
    
  
</search>
